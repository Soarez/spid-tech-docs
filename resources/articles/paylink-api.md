:title The Paylink API

:relevant-endpoints

POST /paylink
GET /paylink/{paylinkId}
DELETE /paylink/{paylinkId}

:aside

## Relevant type definitions

- [Paylink](/types/paylink/)

:body

A paylink object contains common fields, meta data about the paylink, and one or
more paylink items. Paylink items is what end-users actually pay for. Paylink
items contains price and VAT information. The total sum is the total of all
items for each paylink.

Paylink items may be optionally coupled to a current product in SPiD, identified
by the `productId` field. Paylink items also contain a type, indicating the kind
of item and how it is processed, tracked and visualized to the end-user.

There is no need to have a pre-defined product in SPiD to use paylinks. This is
the reason why we allow the paylink creator to specify payment options available
during the purchase.

A `redirectUri` may be optionally pre-defined in the paylink. This can be
overridden by the client if a `redirect_uri` is provided during the payment
flow. It will be used to redirect the user after a purchase or authorization in
SPiD.

Both the whole paylink object and each paylink item have client reference
fields. These can be used by the client in order to track and process paylinks
and orders generated by them.

Each paylink item will generate a corresponding order item. The
`clientItemReference` for each paylink item will be added to each order item as
well as the `clientReference` for the paylink header, which will be added to the
order header. This enables clients to track each order item and each order using
their own references.

![Paylink schema](/images/paylinks-schema.png)

## Sequence diagrams

In the following diagrams, "SPiD API" is the REST API, and "SPiD" is SPiD in the
browser - the UI your users will see when entering credit cards, logging in etc.

### Paylink direct purchase flow

![Paylink direct purchase diagram](/images/paylink-direct-purchase-flow.png)

### Paylink authorize/capture flow

![Paylink authorize/capture diagram](/images/paylink-authorize-capture-flow.png)
