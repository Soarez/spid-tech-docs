:title The Paylink API

:relevant-endpoints

POST /paylink
GET /paylink/{paylinkId}
DELETE /paylink/{paylinkId}

:aside

## Relevant type definitions

- [Paylink](/types/paylink/)

:body

Paylinks allow clients to charge a customer for products without storing them in
SPiD's product database. A paylink is simply a link that represents a set of
products, their prices and other meta-data. Following the link will take the
user to SPiD checkout where they can pay for the products. Upon completion, the
user is sent back to the client with a confirmation from SPiD.

Paylink objects contain meta-data and one or more paylink items. Paylink items
are what end-users actually pay for. They contain price and VAT information. The
total sum of a paylink is the total of all items.

Paylink items can optionally be coupled to a current product in SPiD, identified
by the `productId` field. Paylink items also contain a type, indicating the kind
of item and how it is processed, tracked and visualized to the end-user.

By providing a `redirect_uri` during the payment flow, the client can control
where the user is sent after successful payment. If one is not provided, the
client-default `redirectUrl` will be used.

Both the whole paylink object and each paylink item have client reference
fields. These can be used by the client in order to track and process paylinks
and orders generated by them.

Each paylink item will generate a corresponding order item. The
`clientItemReference` for each paylink item will be added to each order item as
well as the `clientReference` for the paylink header, which will be added to the
order header. This enables clients to track each order item and each order using
their own references.

When using paylinks, it is **strongly** recommended to also implement the
[callback functionality](/callbacks/).

![Paylink schema](/images/paylinks-schema.png)

## Sequence diagrams

In the following diagrams, "SPiD API" is the REST API, and "SPiD" is SPiD in the
browser - the UI your users will see when entering credit cards, logging in etc.

### Paylink direct purchase flow

![Paylink direct purchase diagram](/images/paylink-direct-purchase-flow.png)

### Paylink authorize/capture flow

![Paylink authorize/capture diagram](/images/paylink-authorize-capture-flow.png)
